(this["webpackJsonpcommando-covid"]=this["webpackJsonpcommando-covid"]||[]).push([[0],{221:function(e,t,a){e.exports=a(396)},278:function(e,t,a){},280:function(e,t,a){},396:function(e,t,a){"use strict";a.r(t);a(222);var n=a(0),r=a.n(n),o=a(8),i=a.n(o),l=(a(278),a(154)),c=a.n(l),s=a(201),m=a(32),u=(a(280),a(430)),p=a(428),d=a(431),b=a(423),f=a(433),h=a(427),g=a(435),v=a(156),E=a(94),O=a(434),y=a(429),S=a(75),j=Object(b.a)((function(e){return Object(f.a)({textField:{color:e.palette.text.secondary}})})),C=function(e){var t=e.name,a=e.required,n=e.select,o=e.children,i=e.formikProps,l=e.tooltipTitle,c=j(),s=Object(S.useTranslate)(),u=i.values,p=i.touched,d=i.errors,b=i.handleChange,f=i.handleBlur,h=r.a.useState(!1),g=Object(m.a)(h,2),v=g[0],E=g[1];return r.a.createElement(O.a,{title:l||s("form.tip.".concat(t)),disableFocusListener:!0,disableHoverListener:Boolean(!l)&&Boolean(""===s("form.tip.".concat(t))),open:v},r.a.createElement(y.a,{required:a,select:n,className:c.textField,name:t,label:s("form.".concat(t)),value:u[t],onChange:b,onBlur:f,InputLabelProps:{shrink:!0},helperText:d[t]&&p[t]&&d[t],error:Boolean(d[t]&&p[t]),onMouseEnter:function(){return E(!0)},onMouseLeave:function(){return E(!1)},onClick:function(){return E(!1)}},o))},w=Object(b.a)((function(e){return Object(f.a)({formControl:{margin:e.spacing(1),minWidth:180}})})),P=function(e){var t=e.name,a=e.required,n=e.formikProps,o=e.tooltipTitle,i=w();return r.a.createElement(g.a,{className:i.formControl},r.a.createElement(C,{required:a,name:t,formikProps:n,tooltipTitle:o}))},k=Object(b.a)((function(e){return Object(f.a)({root:{flexGrow:1},grid:{},actions:{float:"left",margin:e.spacing(1)},textField:{color:e.palette.text.secondary}})})),x=function(e){var t=e.onChange,a=k(),n=Object(S.useTranslate)();return r.a.createElement(v.b,{enableReinitialize:!0,initialValues:{s0:"0.7",lambda:"12",beta:"0.5"},onSubmit:function(e,a){a.setSubmitting;t({s0:e.s0,lambda:e.lambda,beta:e.beta})},validationSchema:E.b().shape({s0:E.a().typeError("Veuillez entrer un nombre").positive("Veuillez entrer un nombre entre 0 et 1.").min(0,"Veuillez entrer un nombre entre 0 et 1.").max(1,"Veuillez entrer un nombre entre 0 et 1.").required("Ce champs est obligatoire"),lambda:E.a().typeError("Veuillez entrer un nombre").positive("Veuillez entrer un nombre entre 0 et 20.").min(0,"Veuillez entrer un nombre entre 0 et 20.").max(20,"Veuillez entrer un nombre entre 0 et 20.").required("Ce champs est obligatoire"),beta:E.a().typeError("Veuillez entrer un nombre").positive("Veuillez entrer un nombre entre 0 et 1.").min(0,"Veuillez entrer un nombre entre 0 et 1.").max(1,"Veuillez entrer un nombre entre 0 et 1.").required("Ce champs est obligatoire")})},(function(e){return r.a.createElement(v.a,null,r.a.createElement(h.a,{className:a.grid,container:!0,direction:"row",justify:"center",alignItems:"center"},r.a.createElement(g.a,{className:a.formControl},r.a.createElement(h.a,{item:!0},r.a.createElement(P,{name:"s0",formikProps:e})),r.a.createElement(h.a,{item:!0},r.a.createElement(P,{name:"lambda",formikProps:e})),r.a.createElement(h.a,{item:!0},r.a.createElement(P,{name:"beta",formikProps:e}))),r.a.createElement(h.a,{item:!0},r.a.createElement(d.a,{className:a.actions,variant:"contained",color:"primary",type:"submit"},n("form.compute")))))}))},D=a(209),z=function(e,t,a){var n=1-e,r=[],o=[],i=[];r[0]=e,o[0]=n,i[0]=0;for(var l=1;l<30;l++)r[l]=r[l-1]*(1-a),o[l]=o[l-1]*(1-1/t)+r[l-1]*a,i[l]=o[l-1]*(1/t)+i[l-1];return{saints:r,infectes:o,retires:i}};function V(e,t){var a={weekday:"long",year:"numeric",month:"long",day:"numeric"},n=new Array(t);n[0]=Date.parse(e.toDateString());for(var r=1;r<n.length;r++)n[r]=n[r-1]+864e5,n[r-1]=new Date(n[r-1]).toLocaleDateString("fr-FR",a);return n[n.length-1]=new Date(n[n.length-1]).toLocaleDateString("fr-FR",a),n}var q=V(new Date(2020,0,23),z().saints.length),L=function(e){var t=e.s0,a=e.lambda,n=e.beta,o=z(t,a,n),i=o.saints,l=o.infectes,c=o.retires,s=(V(new Date(2020,4,4),i.length),{labels:q,datasets:[{label:["Population saine"],data:i,backgroundColor:"rgba(54, 162, 235, 0.6)",borderWidth:2},{label:["Population infect\xe9e"],data:l,backgroundColor:"rgba(255, 206, 86, 0.6)",borderWidth:2},{label:["Population r\xe9tablie"],data:c,backgroundColor:"rgba(255, 88, 132, 0.6)",borderWidth:2}]});return r.a.createElement("div",{className:"Chart"},r.a.createElement(D.a,{data:s,width:"10",height:"10",options:{title:{display:!0,text:"Mod\xe8le SIR simple",fontSize:25},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Part de la population",fontSize:18}}],xAxes:[{scaleLabel:{display:!0,labelString:"Temps",fontSize:18}}]}}}))},N=Object(b.a)((function(e){return Object(f.a)({root:{flexGrow:1}})})),T=function(){var e=N(),t=r.a.useState(),a=Object(m.a)(t,2),n=a[0],o=a[1];return console.log({values:n}),r.a.createElement("div",{className:e.root},r.a.createElement(h.a,{container:!0,direction:"column",justify:"center",alignItems:"stretch",spacing:3},r.a.createElement(h.a,{item:!0,xs:12},r.a.createElement(x,{onChange:function(e){return o(e)}})),n&&r.a.createElement(h.a,{item:!0}," ",L(n)," ")))},A=r.a.createContext(["fr",function(){}]),R=A,B={fr:{pageNotFound:"Page non trouv\xe9e",cancel:"Annuler",save:"Enregistrer",appBar:{about:"A propos de",developpedBy:"Application d\xe9velopp\xe9e par",version:"Version",questionsOrRemarks:"Questions ou remarques :",wip:"En cours de d\xe9veloppement",help:"Aide",login:"Se connecter",logout:"Se d\xe9connecter"},error:{shouldBeNumber:"Doit \xeatre un nombre",positiveNumber:"Doit \xeatre un nombre positif",tooSmall:"Cela parait petit",tooLarge:"N'est pas un peu grand ?",required:"Obligatoire"},form:{s0:"Param\xe8tre s0",lambda:"Param\xe8tre lambda",beta:"Param\xe8tre beta",compute:"Calculer",tip:{s0:"TODO: D\xe9finir ce param\xe8tre",lambda:"TODO: D\xe9finir ce param\xe8tre",beta:"TODO: D\xe9finir ce param\xe8tre"}}}},I=function(){var e=r.a.useState("fr"),t=Object(m.a)(e,2),a=t[0],o=(t[1],Object(n.useState)({a:0,b:0})),i=Object(m.a)(o,2),l=i[0],b=i[1],f=Object(n.useState)({result:0}),h=Object(m.a)(f,2),g=h[0],v=h[1];Object(n.useEffect)((function(){fetch("/get_data_sample").then((function(e){return e.json().then((function(e){console.log(e),b(e)}))}))}),[]);var E=function(){var e=Object(s.a)(c.a.mark((function e(){var t,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={x:2,y:3},e.next=3,fetch("/add_data",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 3:(a=e.sent).ok&&(console.log("response worked!"),a.json().then((function(e){console.log(e),v(e)})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(R.Provider,{value:e},r.a.createElement(S.I18n,{locale:a,messages:"fr"===a?B.fr:B.en},r.a.createElement("div",{className:"App"},r.a.createElement(u.a,{m:8},r.a.createElement(p.a,{variant:"h3",component:"h2"},"Projet MODCOV19 - prototype v1.0")),r.a.createElement(u.a,{m:8},r.a.createElement(p.a,{variant:"h4",component:"h2"},"Data r\xe9cup\xe9r\xe9e de l'API python: (a: ",l.a,", b:"," ",l.b,")"),r.a.createElement(d.a,{color:"primary",onClick:E},"Recup\xe9rer donn\xe9es"),r.a.createElement(p.a,{variant:"h4",component:"h2"},"Reponse de l'API Python \xe0 la requ\xeate POST envoy\xe9e par le bouton: 2 + 3 =",g.result)),r.a.createElement(p.a,{variant:"body1",component:"h2"},"Entrer les param\xe8tres du mod\xe8le SIR dans les champs suivants puis cliquer sur CALCULER."),r.a.createElement(u.a,{m:8,h:30},L({s0:.9,lambda:6,beta:.6}),r.a.createElement(p.a,{variant:"h5",component:"h2"},"Entrer les param\xe8tres du mod\xe8le SIR dans les champs suivants puis cliquer sur CALCULER.")),r.a.createElement(u.a,{m:8},r.a.createElement(T,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[221,1,2]]]);
//# sourceMappingURL=main.38ac8476.chunk.js.map